(function(t){function e(e){for(var s,l,n=e[0],r=e[1],c=e[2],p=0,d=[];p<n.length;p++)l=n[p],i[l]&&d.push(i[l][0]),i[l]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s]);u&&u(e);while(d.length)d.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],s=!0,n=1;n<a.length;n++){var r=a[n];0!==i[r]&&(s=!1)}s&&(o.splice(e--,1),t=l(l.s=a[0]))}return t}var s={},i={app:0},o=[];function l(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=t,l.c=s,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)l.d(a,s,function(e){return t[e]}.bind(null,s));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],r=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var u=r;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0519":function(t,e,a){},"089b":function(t,e,a){},"0af8":function(t,e,a){},"15f9":function(t,e,a){},"1c9a":function(t,e,a){"use strict";var s=a("f8b3"),i=a.n(s);i.a},"203b":function(t,e,a){},"206d":function(t,e,a){"use strict";var s=a("203b"),i=a.n(s);i.a},"21c5":function(t,e,a){},"232f":function(t,e,a){},2856:function(t,e,a){},"328d":function(t,e,a){},"3c83":function(t,e,a){},"461a":function(t,e,a){},"4d31":function(t,e,a){"use strict";var s=a("21c5"),i=a.n(s);i.a},"4d41":function(t,e,a){t.exports=a.p+"img/avatar.0ea52adb.png"},"4e44":function(t,e,a){},"55ad":function(t,e,a){"use strict";var s=a("0af8"),i=a.n(s);i.a},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("097d");var s=a("2b0e"),i=(a("2ef0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout-container flex justify-center"},[a("transition",{attrs:{name:"fade"}},[t.splashScreen?a("div",{staticClass:"splash-screen"},[a("div",{staticClass:"wrap"},[a("img",{staticClass:"logo",attrs:{src:"/logo.svg",alt:"logo"}}),a("img",{attrs:{src:"/Ripple-2s-200px.gif",alt:"loading-image"}})])]):t._e()]),"left"===t.navPos?a("vertical-nav",{attrs:{position:t.navPos,"collapse-nav":t.collapseNav,"open-sidebar":t.openSidebar},on:{"update:openSidebar":function(e){t.openSidebar=e},"collapse-nav-toggle":function(e){t.collapseNav=!t.collapseNav},"push-page":t.closeSidebar}}):t._e(),a("div",{staticClass:"container flex column box grow"},["left"===t.navPos?a("div",{staticClass:"header"},[a("Toolbar",{attrs:{"menu-burger":t.navPos},on:{"toggle-sidebar":function(e){t.openSidebar=!t.openSidebar}}})],1):t._e(),a("div",{staticClass:"main box grow flex"},[t.roundedCorners?a("span",{staticClass:"main-out-border--top-left"}):t._e(),t.roundedCorners?a("span",{staticClass:"main-out-border--top-right"}):t._e(),t.roundedCorners?a("span",{staticClass:"main-out-border--bottom-left"}):t._e(),t.roundedCorners?a("span",{staticClass:"main-out-border--bottom-right"}):t._e(),a("transition",{attrs:{name:t.viewAnimation,mode:"out-in"}},[a("router-view",{staticClass:"view box grow"})],1)],1)]),"left"===t.navPos?a("PPlayer"):t._e()],1)}),o=[],l=(a("7f7f"),a("4a35")),n=function(){var t,e=this,a=e.$createElement,s=e._self._c||a;return s("div",{staticClass:"vertical-nav",class:{"nav-collapsed":e.collapseNav}},[s("div",{staticClass:"sidebar-mask",class:{open:e.openSidebar},on:{click:e.closeNav}}),s("div",{staticClass:"sidebar flex column",class:(t={open:e.openSidebar},t["pos-"+e.position]=!0,t)},[s("logo",{attrs:{"collapse-nav":e.collapseNav},on:{"collapse-nav-toggle":e.collapseNavToggle}}),s("div",{staticClass:"box-nav box grow"},[s("div",{staticClass:"scroll-nav"},[s("div",[s("Nav",{attrs:{"is-collapse":e.collapseNav},on:{"push-page":e.pushPage}})],1)])])],1)])},r=[],c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-menu",{staticClass:"main-navigation-menu",class:{"nav-collapsed":t.isCollapse},attrs:{"default-active":t.activeLink,mode:t.mode,collapse:t.isCollapse,"unique-opened":!0,"background-color":"transparent"},on:{"update:defaultActive":function(e){t.activeLink=e},select:t.goto}},[a("el-menu-item",{attrs:{index:"/"}},[a("i",{staticClass:"mdi mdi-music"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("Library")])]),a("el-menu-item",{attrs:{index:"/playlists"}},[a("i",{staticClass:"mdi mdi-bookmark-music"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("Playlists")])]),a("el-menu-item",{attrs:{index:"/contract"}},[a("i",{staticClass:"mdi mdi-file-document"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("Contract")])]),a("el-menu-item",{attrs:{index:"/reporting"}},[a("i",{staticClass:"mdi mdi-chart-bar"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("Reporting")])])],1)},u=[],p={name:"Nav",props:["mode","isCollapse"],data:function(){return{isIe:!0,isEdge:!0,activeLink:null}},methods:{goto:function(t,e){"/"===t.charAt(0)&&(this.$router.push(t),this.$emit("push-page",{page:t}))},setLink:function(t){this.activeLink=t}},created:function(){var t=this;this.setLink(this.$router.currentRoute.path),this.$router.afterEach(function(e,a){t.setLink(t.$router.currentRoute.path)})},mounted:function(){}},d=p,m=(a("a140"),a("d6f3"),a("2877")),f=Object(m["a"])(d,c,u,!1,null,"54c78ac8",null);f.options.__file="nav.vue";var g=f.exports,h=function(){var t,e=this,s=e.$createElement,i=e._self._c||s;return i("div",{staticClass:"box-logo flex align-center",class:(t={"nav-collapsed":e.collapseNav},t[e.mode]=!0,t)},[i("img",{staticClass:"image-logo",attrs:{src:a("e347"),alt:"logo"}}),i("div",{staticClass:"app-name",on:{click:function(t){e.goto("/")}}},[e._v("Polaris")]),i("button",{staticClass:"collapse-nav",on:{click:e.collapseNavToggle}},[i("i",{staticClass:"mdi mdi-menu"})])])},v=[],b={name:"Logo",props:["collapseNav","mode"],data:function(){return{}},methods:{collapseNavToggle:function(){this.$emit("collapse-nav-toggle")},goto:function(t,e){this.$router.push(t)}}},y=b,_=(a("4d31"),Object(m["a"])(y,h,v,!1,null,null,null));_.options.__file="logo.vue";var w=_.exports,x={name:"VerticalNav",props:["collapseNav","openSidebar","position"],data:function(){return{}},methods:{collapseNavToggle:function(){this.$emit("collapse-nav-toggle")},pushPage:function(t,e){this.$emit("push-page",{page:t})},closeNav:function(){this.$emit("update:openSidebar",!1)}},components:{Nav:g,Logo:w}},C=x,P=(a("6fa1"),Object(m["a"])(C,n,r,!1,null,null,null));P.options.__file="vertical-nav.vue";var S=P.exports,O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"toolbar flex align-center justify-space-between"},[s("div",{staticClass:"box-left box grow flex"},["right"!==t.menuBurger?s("button",{staticClass:"toggle-sidebar card-base card-shadow--small",on:{click:t.toggleSidebar}},[s("i",{staticClass:"mdi mdi-menu"})]):t._e(),s("search",{staticClass:"hidden-xs-only"})],1),s("div",{staticClass:"box-right flex align-center pl-10"},[s("button",{staticClass:"fullscreen-button",on:{click:t.toggleFullscreen}},[t.fullscreen?t._e():s("i",{staticClass:"mdi mdi-fullscreen"}),t.fullscreen?s("i",{staticClass:"mdi mdi-fullscreen-exit"}):t._e()]),s("span",{staticClass:"username"},[t._v(t._s(t.username))]),s("el-dropdown",{attrs:{trigger:"click"},on:{command:t.onCommand}},[s("span",{staticClass:"el-dropdown-link"},[s("img",{staticClass:"avatar",attrs:{src:a("4d41"),alt:"avatar"}})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"/logout",divided:""}},[s("i",{staticClass:"mdi mdi-logout mr-10"}),t._v(" Logout")])],1)],1),"right"===t.menuBurger?s("button",{staticClass:"toggle-sidebar toggle-sidebar__right card-base card-shadow--small",on:{click:t.toggleSidebar}},[s("i",{staticClass:"mdi mdi-menu"})]):t._e()],1)])},k=[],$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"notification-box"},[t._l(t.notifications,function(e){return a("div",{key:e.id,staticClass:"notify"},[a("div",{staticClass:"flex"},[a("div",{staticClass:"n-title box grow"},[a("strong",[a("i",{class:e.icon}),t._v(" "+t._s(e.title))])]),a("div",{staticClass:"n-date"},[t._v(t._s(e.date)+" "),a("i",{staticClass:"mdi mdi-clock"})])]),a("div",{staticClass:"n-desc"},[t._v(t._s(e.desc))])])}),a("div",{staticClass:"see-all"},[t._v("See all notifications")])],2)},F=[],L={name:"NotificationBox",data:function(){return{notifications:[{id:1,title:"New order",icon:"mdi mdi-cart-outline",desc:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam in diam sit amet felis ultricies ultricies vitae et tortor. Proin dapibus justo felis, ut imperdiet lacus accumsan quis.",date:"Just now!"},{id:2,title:"New Schedule Realease",icon:"mdi mdi-calendar",desc:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam in diam sit amet felis ultricies ultricies vitae et tortor. Proin dapibus justo felis, ut imperdiet lacus accumsan quis.",date:"2 Min Ago"},{id:3,title:"New message from David",icon:"mdi mdi-email-outline",desc:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam in diam sit amet felis ultricies ultricies vitae et tortor. Proin dapibus justo felis, ut imperdiet lacus accumsan quis.",date:"30 Min Ago"}]}}},j=L,D=(a("beb6"),Object(m["a"])(j,$,F,!1,null,"0e96afc8",null));D.options.__file="NotificationBox.vue";var T=D.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search-box"},[a("el-autocomplete",{staticClass:"search-input",attrs:{"popper-class":"search-box-popper card-base card-shadow--small","fetch-suggestions":t.querySearch,placeholder:"Search...","trigger-on-focus":!0,clearable:"","prefix-icon":"el-icon-search",size:"small","select-when-unmatched":!0},on:{select:t.handleSelect},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"value"},[t._v(t._s(e.item.value))]),a("span",{staticClass:"tags"},[t._v(t._s(e.item.tags))])]}}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[a("template",{slot:"suffix"},[t.search?a("i",{staticClass:"el-input__icon el-icon-circle-close-outline",on:{click:function(e){t.search=""}}}):t._e()])],2)],1)},R=[],I=(a("f751"),a("c93e")),z=a("6bde"),E=(a("456d"),a("ac6a"),{name:"Search",data:function(){return{search:"",list:[]}},methods:{querySearch:function(t,e){var a=this.list,s=t?a.filter(this.createFilter(t)):a;e(s)},createFilter:function(t){return function(e){return-1!==e.meta.toLowerCase().indexOf(t.toLowerCase())}},handleSelect:function(t){this.$store.dispatch("search",t),this.$router.push({name:"library",params:{searchText:t}})},flattenObject:function(t){var e=this,a={};return Object.keys(t).forEach(function(s){"object"!==Object(z["a"])(t[s])?a[s]=t[s]:a=Object(I["a"])({},a,e.flattenObject(t[s]))}),a},flatten:function(t,e,a){var s=[];for(var i in t){var o=Object.assign({},t[i]);o[e]&&o[e].length&&delete o[e],s.push(o),t[i][e]&&t[i][e].length&&(s=s.concat(t[i][e]))}var l=!1;for(var n in s)s[n][e]&&s[n][e].length&&(l=!0);return l?this.flatten(s,e,a):a(s),!0},parseList:function(t){var e=[];for(var a in t)if(t[a].name&&t[a].meta&&t[a].meta.searchable){var s=t[a].name,i=t[a].meta.title||s||"",o="";t[a].meta.tags&&t[a].meta.tags.length&&(o=t[a].meta.tags.join(", "));var l=s+i+o;i&&e.push({value:i,tags:o,name:s,meta:l})}return e}},mounted:function(){var t=this;this.flatten(this.$router.options.routes,"children",function(e){t.list=t.parseList(e)})}}),A=E,B=(a("c9e4"),a("f892"),Object(m["a"])(A,N,R,!1,null,"6d163a5d",null));B.options.__file="Search.vue";var q=B.exports,M={name:"Toolbar",props:["menuBurger"],data:function(){return{popoverWidth:300,fullscreen:!1,lang:"us",username:""}},methods:{onCommandLang:function(t){"/"===t.charAt(0)?this.onCommand(t):this.lang=t},onCommand:function(t){this.$router.push(t)},toggleSidebar:function(){this.$emit("toggle-sidebar")},resizePopoverWidth:function(){window.innerWidth<=768?this.popoverWidth=250:this.popoverWidth=300},toggleFullscreen:function(){var t=this;this.$fullscreen.toggle(document.querySelector("body"),{wrap:!1,callback:function(){t.fullscreen=t.$fullscreen.getState()}})}},components:{NotificationBox:T,Search:q},mounted:function(){this.username=this.$store.getters.currentUsername,this.fullscreen=this.$fullscreen.getState(),this.resizePopoverWidth(),window.addEventListener("resize",this.resizePopoverWidth)},beforeDestroy:function(){window.removeEventListener("resize",this.resizePopoverWidth)}},W=M,H=(a("55ad"),Object(m["a"])(W,O,k,!1,null,"d205f408",null));H.options.__file="toolbar.vue";var V=H.exports,G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("aplayer",{ref:"aplayer",attrs:{audio:t.currentPlaySong,lrcType:0,fixed:""}})},J=[],U={name:"PPlayer",data:function(){return{audio:[{name:"I Really Like You 西班牙语版（Cover Carly Rae Jepsen）",artist:"熊子",url:"http://pdacsgxq7.bkt.clouddn.com/mp3/mucho.mp3",cover:"http://p1.music.126.net/UhbkP71d9KTMsdNczCf2wA==/109951162986700564.jpg?param=300y300",lrc:"http://pdacsgxq7.bkt.clouddn.com/lrc/mucho.lrc"},{name:"Mermaid girl (Extended RRver.)",artist:"森永真由美",url:"http://pdacsgxq7.bkt.clouddn.com/mp3/mermaidgirl.mp3",cover:"http://p1.music.126.net/xXxBuZksld5HtovQxI1D0A==/3227066630258578.jpg?param=300y300",lrc:"http://pdacsgxq7.bkt.clouddn.com/lrc/mermaidgirl.lrc"},{name:"ヒビカセ",artist:"れをる",url:"http://pdacsgxq7.bkt.clouddn.com/mp3/hibikase.mp3",cover:"http://p1.music.126.net/cZPx3peGTuWEI_GaZB5CDg==/8892850045794893.jpg?param=300y300",lrc:"http://pdacsgxq7.bkt.clouddn.com/lrc/hibikase.lrc"}]}},methods:{},computed:{currentPlaySong:function(){var t=this.$store.getters.currentPlaySong;if(t){var e=[];for(var a in t)e.push({name:t[a].title,artist:t[a].artist,url:t[a].audioFile,cover:t[a].coverimg});return e}return[]}},watch:{currentPlaySong:function(t,e){this.$refs.aplayer.play()}}},Z=U,K=(a("78e1"),Object(m["a"])(Z,G,J,!1,null,null,null));K.options.__file="pplayer.vue";var Q=K.exports,X=Object(l["detect"])(),Y={name:"Polaris",data:function(){return{collapseNav:!1,openSidebar:!1,innerWidth:0}},computed:{navPos:function(){return this.$store.getters.navPos},toolbar:function(){return this.$store.getters.toolbar},footer:function(){return this.$store.getters.footer},boxed:function(){return this.$store.getters.boxed},roundedCorners:function(){return this.$store.getters.roundedCorners},viewAnimation:function(){return this.$store.getters.viewAnimation||"none"},isLogged:function(){return this.$store.getters.isLogged},splashScreen:function(){return this.$store.getters.splashScreen}},methods:{resizeOpenNav:function(){this.innerWidth=window.innerWidth,window.innerWidth<=768&&(this.collapseNav=!1)},closeSidebar:function(){this.openSidebar=!1}},components:{VerticalNav:S,Toolbar:V,PPlayer:Q},created:function(){X.name&&document.getElementsByTagName("html")[0].classList.add(X.name)},mounted:function(){this.resizeOpenNav(),window.addEventListener("resize",this.resizeOpenNav)},beforeDestroy:function(){window.removeEventListener("resize",this.resizeOpenNav)}},tt=Y,et=(a("5c0b"),Object(m["a"])(tt,i,o,!1,null,null,null));et.options.__file="App.vue";var at=et.exports,st=a("5c96"),it=a.n(st),ot=a("b2d6"),lt=a.n(ot),nt=a("252c"),rt=(a("6eb0"),a("c88e")),ct=a.n(rt),ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(t.tagname,{tag:"section",staticClass:"ps-container",on:{"~mouseover":function(e){return t.update(e)},"ps-scroll-y":t.scrollHanle,"ps-scroll-x":t.scrollHanle,"ps-scroll-up":t.scrollHanle,"ps-scroll-down":t.scrollHanle,"ps-scroll-left":t.scrollHanle,"ps-scroll-right":t.scrollHanle,"ps-y-reach-start":t.scrollHanle,"ps-y-reach-end":t.scrollHanle,"ps-x-reach-start":t.scrollHanle,"ps-x-reach-end":t.scrollHanle}},[t._t("default")],2)},pt=[],dt=a("b7f5"),mt={name:"vue-ps",props:{settings:{type:Object,default:function(){return{wheelSpeed:1.5,wheelPropagation:!0}}},swicher:{type:Boolean,default:!0},tagname:{type:String,default:"section"}},data:function(){return{ps:null,_ps_inited:!1}},methods:{scrollHanle:function(t){this.$emit(t.type,t)},update:function(){this.ps&&this.ps.update()},__init:function(){var t=this;this.$nextTick(function(){t.swicher&&(t._ps_inited?t.update(t.$el):(t._ps_inited=!0,t.ps=new dt["a"](t.$el,t.settings)))})},__uninit:function(){this.ps&&this.ps.destroy(this.$el),this.ps=null,this._ps_inited=!1}},watch:{swicher:function(t){t&&!this._ps_inited&&this.__init(),!t&&this._ps_inited&&this.__uninit()},$route:function(){this.update()}},mounted:function(){this.__init()},updated:function(){this.$nextTick(this.update)},activated:function(){this.__init()},deactivated:function(){this.__uninit()},beforeDestroy:function(){this.__uninit()}},ft=mt,gt=(a("65ba"),Object(m["a"])(ft,ut,pt,!1,null,null,null));gt.options.__file="index.vue";var ht=gt.exports,vt=ht,bt=a("b9e5"),yt=a.n(bt),_t=a("041b"),wt=a.n(_t),xt=(a("8d10"),a("ec5d"),a("b751"),a("8c4f")),Ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-table scrollable"},[a("div",{staticClass:"card-base card-shadow--medium filter-box bg-white"},[a("el-collapse",[a("el-collapse-item",{staticClass:"filter-collapse-item",attrs:{title:"过滤选项"}},[a("el-form",{ref:"filterForm",attrs:{model:t.filterForm}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"歌手名",prop:"artists"}},[a("el-select",{attrs:{multiple:"",filterable:"",remote:"","reserve-keyword":"","default-first-option":"",placeholder:"请输入歌手名","reserve-keyword":!1,"remote-method":t.loadArtists,loading:t.loading},model:{value:t.filterForm.artists,callback:function(e){t.$set(t.filterForm,"artists",e)},expression:"filterForm.artists"}},t._l(t.artistOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.label}})}))],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"专辑名",prop:"albums"}},[a("el-select",{attrs:{multiple:"",filterable:"",remote:"","reserve-keyword":"","default-first-option":"",placeholder:"请输入专辑名","reserve-keyword":!1,"remote-method":t.loadAlbums,loading:t.loading},model:{value:t.filterForm.albums,callback:function(e){t.$set(t.filterForm,"albums",e)},expression:"filterForm.albums"}},t._l(t.albumOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.label}})}))],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"词作者名",prop:"lyricists"}},[a("el-select",{attrs:{multiple:"",filterable:"",remote:"","reserve-keyword":"","default-first-option":"",placeholder:"请输入词作者名","reserve-keyword":!1,"remote-method":t.loadLyricists,loading:t.loading},model:{value:t.filterForm.lyricists,callback:function(e){t.$set(t.filterForm,"lyricists",e)},expression:"filterForm.lyricists"}},t._l(t.lyricistOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.label}})}))],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"曲作者名",prop:"composers"}},[a("el-select",{attrs:{multiple:"",filterable:"",remote:"","reserve-keyword":"","default-first-option":"",placeholder:"请输入曲作者名","reserve-keyword":!1,"remote-method":t.loadComposers,loading:t.loading},model:{value:t.filterForm.composers,callback:function(e){t.$set(t.filterForm,"composers",e)},expression:"filterForm.composers"}},t._l(t.composerOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.label}})}))],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"词权利百分比",prop:"lyricRight"}},[a("el-slider",{staticClass:"slider",attrs:{range:"","show-stops":"",max:100,"format-tooltip":t.formatTooltip},on:{change:t.onLyricRightChange},model:{value:t.filterForm.lyricRight,callback:function(e){t.$set(t.filterForm,"lyricRight",e)},expression:"filterForm.lyricRight"}})],1)],1),a("el-col",{attrs:{span:4}},[this.filterForm.lyricRight?a("div",{staticClass:"copyrights-scale"},[a("span",[t._v(t._s(this.filterForm.lyricRight[0])+"%")]),t._v("~"),a("span",[t._v(t._s(this.filterForm.lyricRight[1])+"%")])]):t._e()]),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"曲权利百分比",prop:"musicRight"}},[a("el-slider",{staticClass:"slider",attrs:{range:"","show-stops":"",max:100,"format-tooltip":t.formatTooltip},on:{change:t.onMusicRightChange},model:{value:t.filterForm.musicRight,callback:function(e){t.$set(t.filterForm,"musicRight",e)},expression:"filterForm.musicRight"}})],1)],1),a("el-col",{attrs:{span:4}},[this.filterForm.musicRight?a("div",{staticClass:"copyrights-scale"},[a("span",[t._v(t._s(this.filterForm.musicRight[0])+"%")]),t._v("~"),a("span",[t._v(t._s(this.filterForm.musicRight[1])+"%")])]):t._e()])],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"歌曲风格",prop:"genre"}},[a("el-select",{attrs:{filterable:"","default-first-option":"",placeholder:"请选择","reserve-keyword":!1},model:{value:t.filterForm.genre,callback:function(e){t.$set(t.filterForm,"genre",e)},expression:"filterForm.genre"}},t._l(t.genreOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.label}})}))],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"标签",prop:"tags"}},[a("el-select",{attrs:{multiple:"",filterable:"",remote:"","reserve-keyword":"","default-first-option":"",placeholder:"请输入标签","reserve-keyword":!1,"remote-method":t.loadTags,loading:t.loading},model:{value:t.filterForm.tags,callback:function(e){t.$set(t.filterForm,"tags",e)},expression:"filterForm.tags"}},t._l(t.tagOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.label}})}))],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所有权",prop:"ownership"}},[a("el-checkbox-group",{model:{value:t.filterForm.ownership,callback:function(e){t.$set(t.filterForm,"ownership",e)},expression:"filterForm.ownership"}},[a("el-checkbox",{attrs:{label:"自有"}}),a("el-checkbox",{attrs:{label:"代理"}})],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{staticClass:"filter-actions"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.onFilterSubmit}},[t._v("过滤")]),a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.onFilterReset("filterForm")}}},[t._v("重置")])],1)],1)],1)],1)],1)],1)],1),a("div",{staticClass:"table-box card-base card-shadow--medium"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData},on:{"row-click":t.openDetails}},[a("el-table-column",{attrs:{prop:"title",label:"Title"}}),a("el-table-column",{attrs:{prop:"ops",label:"",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"mini",icon:"el-icon-caret-right",circle:""},on:{click:function(a){a.stopPropagation(),t.play(e.row)}}}),a("el-button",{attrs:{type:"mini",icon:"el-icon-plus",circle:""},on:{click:function(a){a.stopPropagation(),t.addToPlaylist(e.row)}}}),a("el-button",{attrs:{type:"mini",icon:"el-icon-download",circle:""},on:{click:function(a){a.stopPropagation(),t.download(e.row)}}})]}}])}),a("el-table-column",{attrs:{prop:"artist",label:"Artists"}}),a("el-table-column",{attrs:{prop:"composers",label:"Composers"}}),a("el-table-column",{attrs:{prop:"lyricists",label:"Lyricists"}}),a("el-table-column",{attrs:{prop:"album",label:"Album"}})],1),a("el-pagination",{staticClass:"pager",attrs:{"current-page":t.currentPage,"page-sizes":[10,50,100,200],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("song-details",{attrs:{dialogvisible:t.dialogvisible,songdata:t.songdata},on:{"update:dialogvisible":function(e){t.dialogvisible=e}}}),a("el-dialog",{attrs:{"show-close":!0,visible:t.a2pDialogVisible,width:"30%",center:""},on:{close:function(e){t.a2pDialogVisible=!1}}},[a("el-form",{attrs:{model:t.addToPlaylistForm}},[a("el-row",{staticClass:"add-to-playlist-row"},[a("el-col",{attrs:{span:24}},[t.addToPlaylistSong?a("div",{staticClass:"add-to-playlist-label"},[t._v('添加"'+t._s(t.addToPlaylistSong.title)+'"到Playlist: ')]):t._e(),a("el-select",{staticClass:"add-to-playlist-select",attrs:{filterable:"",placeholder:"请选择"},model:{value:t.addToPlaylistForm.playlist,callback:function(e){t.$set(t.addToPlaylistForm,"playlist",e)},expression:"addToPlaylistForm.playlist"}},t._l(t.playlistOptions,function(t){return a("el-option",{key:t.ID,attrs:{label:t.name,value:t.ID}})}))],1)],1),a("el-row",{staticClass:"add-to-playlist-row"},[a("el-col",{staticClass:"add-to-playlist-button",attrs:{span:24}},[a("el-button",{attrs:{type:"primary"},on:{click:t.onAddToPlaylistConfirmed}},[t._v("确认")])],1)],1)],1)],1)],1)},Pt=[],St=(a("20d6"),a("a322")),Ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{"show-close":!0,"custom-class":"song-details-dialog",visible:t.dialogvisible,width:"70%",center:""},on:{close:t.closeSongDetails}},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"歌曲基本信息",name:"basicDetails"}},[a("div",[a("h3",[t._v("基本信息")]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"flex album"},[a("div",{staticClass:"album-cover align-vertical"},[a("img",{staticClass:"align-vertical-middle",attrs:{src:t.songdata.coverimg}})]),a("div",{staticClass:"album-cover-info box grow flex"},[a("div",{staticClass:"name box grow flex column justify-center p-10"},[a("div",{staticClass:"song-name"},[t._v("歌名："),a("span",[t._v(t._s(t.songdata.title))])]),a("div",{staticClass:"album-name"},[t._v("专辑名："),a("span",[t._v(t._s(t.songdata.album))])]),a("div",{staticClass:"album-artist"},[t._v("歌手："),a("span",[t._v(t._s(t.songdata.artist))])])])])])])],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"field-box"},[t._v("ID: "),a("span",[t._v(t._s(t.songdata.ID))])])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"field-box"},[t._v("ISRC: "),a("span",[t._v(t._s(t.songdata.ISRC))])])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"field-box"},[t._v("ISBN: "),a("span",[t._v(t._s(t.songdata.ISBN))])])])],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"field-box"},[t._v("词作者: "),a("span",[t._v(t._s(t.songdata.lyricists))])])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"field-box"},[t._v("曲作者: "),a("span",[t._v(t._s(t.songdata.composers))])])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"field-box"},[t._v("长度: "),a("span",[t._v(t._s(t.songdata.length))])])])],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"field-box"},[t._v("类型: "),a("span",[t._v(t._s(t.songdata.genre))])])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"field-box"},[t._v("标签: "),t._l(t.songdata.tags,function(e){return a("span",[t._v(t._s(e))])})],2)]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"field-box"},[t._v("是否自有: "),a("span",[t._v(t._s(t.songdata.ownership))])])])],1),a("el-collapse",[a("el-collapse-item",{staticClass:"filter-collapse-item",attrs:{title:"歌词",name:"1"}},[a("p",[t._v("\n\t\t\t\t\t\t\t我的小时候 吵闹任性的时候"),a("br"),t._v("\n\t\t\t\t\t\t\t我的外婆 总会唱歌哄我"),a("br"),t._v("\n\t\t\t\t\t\t\t夏天的午后 姥姥的歌安慰我"),a("br"),t._v("\n\t\t\t\t\t\t\t那首歌好像这样唱的"),a("br"),t._v("\n\t\t\t\t\t\t\t天黑黑 欲落雨"),a("br"),t._v("\n\t\t\t\t\t\t\t天黑黑 黑黑"),a("br"),t._v("\n\t\t\t\t\t\t\t离开小时候 有了自己的生活"),a("br"),t._v("\n\t\t\t\t\t\t\t新鲜的歌 新鲜的念头"),a("br"),t._v("\n\t\t\t\t\t\t\t任性和冲动 无法控制的时候"),a("br"),t._v("\n\t\t\t\t\t\t\t我忘记还有这样的歌"),a("br"),t._v("\n\t\t\t\t\t\t\t天黑黑 欲落雨 （闽南语：tin o o mie lo ho）"),a("br"),t._v("\n\t\t\t\t\t\t\t天黑黑 黑黑（闽南语：tin o o o o）"),a("br"),t._v("\n\t\t\t\t\t\t\t我爱上让我奋不顾身的一个人"),a("br"),t._v("\n\t\t\t\t\t\t\t我以为这就是我所追求的世界"),a("br"),t._v("\n\t\t\t\t\t\t\t然而横冲直撞 被误解被骗"),a("br"),t._v("\n\t\t\t\t\t\t\t是否成人的世界背后总有残缺"),a("br"),t._v("\n\t\t\t\t\t\t\t我走在每天必须面对的分岔路"),a("br"),t._v("\n\t\t\t\t\t\t\t我怀念过去单纯美好的小幸福"),a("br"),t._v("\n\t\t\t\t\t\t\t爱总是让人哭 让人觉得不满足"),a("br"),t._v("\n\t\t\t\t\t\t\t天空很大却看不清楚 好孤独"),a("br"),t._v("\n\t\t\t\t\t\t\t天黑的时候 我又想起那首歌"),a("br"),t._v("\n\t\t\t\t\t\t\t突然期待 下起安静的雨"),a("br"),t._v("\n\t\t\t\t\t\t\t原来外婆的道理早就唱给我听"),a("br"),t._v("\n\t\t\t\t\t\t\t下起雨也要勇敢前进…"),a("br"),t._v("\n\t\t\t\t\t\t\t我相信一切都会平息"),a("br"),t._v("\n\t\t\t\t\t\t\t我现在好想回家去"),a("br"),t._v("\n\t\t\t\t\t\t\t天黑黑 欲落雨"),a("br"),t._v("\n\t\t\t\t\t\t\t天黑黑 黑黑 "),a("br")])])],1)],1)]),a("el-tab-pane",{attrs:{label:"版权信息",name:"copyrights"}},[a("h3",[t._v("词版权")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.songdata.copyrights.lyric,border:""}},[a("el-table-column",{attrs:{prop:"lyricists",label:"词作者",width:"180"}}),a("el-table-column",{attrs:{prop:"share",label:"词权利百分比"}}),a("el-table-column",{attrs:{prop:"startDate",label:"词授权起始日期"}}),a("el-table-column",{attrs:{prop:"endDate",label:"词授权终止日期"}}),a("el-table-column",{attrs:{prop:"disctrict",label:"词授权地域"}}),a("el-table-column",{attrs:{prop:"OP",label:"词OP"}}),a("el-table-column",{attrs:{prop:"SP",label:"词SP"}})],1),a("h3",[t._v("曲版权")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.songdata.copyrights.music,border:""}},[a("el-table-column",{attrs:{prop:"composers",label:"曲作者",width:"180"}}),a("el-table-column",{attrs:{prop:"share",label:"曲权利百分比"}}),a("el-table-column",{attrs:{prop:"startDate",label:"曲授权起始日期"}}),a("el-table-column",{attrs:{prop:"endDate",label:"曲授权结束日期"}}),a("el-table-column",{attrs:{prop:"disctrict",label:"曲授权地域"}}),a("el-table-column",{attrs:{prop:"OP",label:"曲OP"}}),a("el-table-column",{attrs:{prop:"SP",label:"曲SP"}})],1),a("h3",[t._v("录音版权")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.songdata.copyrights.recording,border:""}},[a("el-table-column",{attrs:{prop:"share",label:"录音制作者权利比例",width:"180"}}),a("el-table-column",{attrs:{prop:"endDate",label:"录音版权到期日"}}),a("el-table-column",{attrs:{prop:"disctrict",label:"录音版权授权地域"}}),a("el-table-column",{attrs:{prop:"OP",label:"Rrecording Owner"}}),a("el-table-column",{attrs:{prop:"SP",label:"录音SP"}})],1),a("h3",[t._v("表演者权利")]),a("el-table",{staticStyle:{width:"50%"},attrs:{data:t.songdata.copyrights.artist,border:""}},[a("el-table-column",{attrs:{prop:"OP",label:"表演者权签署公司",width:"180"}}),a("el-table-column",{attrs:{prop:"share",label:"表演者权利比例"}})],1)],1)],1)],1)},kt=[],$t={name:"SongDetails",props:["songdata","dialogvisible"],data:function(){return{activeName:"basicDetails"}},methods:{closeSongDetails:function(){this.activeName="basicDetails",this.$emit("update:dialogvisible",!1)}}},Ft=$t,Lt=(a("f0a1"),Object(m["a"])(Ft,Ot,kt,!1,null,null,null));Lt.options.__file="SongDetails.vue";var jt=Lt.exports,Dt=a("bc3a"),Tt=a.n(Dt),Nt="http://rc.nandor.cn",Rt="http://rcr.nandor.cn",It=function(t){return Tt.a.get("".concat(Nt,"/queryartists"),{params:t})},zt=function(t){return Tt.a.get("".concat(Nt,"/queryalbums"),{params:t})},Et=function(t){return Tt.a.get("".concat(Nt,"/querylyricists"),{params:t})},At=function(t){return Tt.a.get("".concat(Nt,"/querycomposers"),{params:t})},Bt=function(t){return Tt.a.get("".concat(Nt,"/querytags"),{params:t})},qt=function(t){return Tt.a.get("".concat(Nt,"/search"),{params:t})},Mt=function(t){return Tt.a.get("".concat(Nt,"/getplaylist"),{params:t})},Wt=function(t){return Tt.a.get("".concat(Nt,"/genreoptions"),{params:t})},Ht=function(t){return Tt.a.post("".concat(Rt,"/api/v1/playlists.json"),t)},Vt=function(t,e){return Tt.a.delete("".concat(Rt,"/api/v1/playlists/").concat(e,".json"),t)},Gt=function(t,e){return Tt.a.patch("".concat(Rt,"/api/v1/playlists/").concat(e,".json"),t)},Jt=function(t){return Tt.a.post("".concat(Rt,"/users/sign_in.json"),t)},Ut={name:"Library",data:function(){var t;return t={artistOptions:[],albumOptions:[],lyricistOptions:[],composerOptions:[],lyricRight:{},musicRight:{},genreOptions:[],tagOptions:[],loading:!1,currentPage:1,playlistOptions:[],filterForm:{artists:[],albums:[],lyricists:[],composers:[],genre:"",tags:[],ownership:[],lyricRight:[0,100],musicRight:[0,100]},addToPlaylistForm:{playlist:""},tableData:[],dialogvisible:!1,a2pDialogVisible:!1,addToPlaylistSong:{},songdata:{copyrights:{lyric:"",music:""}}},Object(St["a"])(t,"currentPage",1),Object(St["a"])(t,"totalCount",0),Object(St["a"])(t,"pageSize",10),t},methods:{formatTooltip:function(t){return t+"%"},loadArtists:function(t){var e=this,a={};""!==t?(this.loading=!0,It(a).then(function(a){e.loading=!1,e.artistOptions=a.data.filter(function(e){return e.label.toLowerCase().indexOf(t.toLowerCase())>-1})})):this.artistOptions=[]},loadAlbums:function(t){var e=this,a={};""!==t?(this.loading=!0,zt(a).then(function(a){e.loading=!1,e.albumOptions=a.data.filter(function(e){return e.label.toLowerCase().indexOf(t.toLowerCase())>-1})})):this.albumOptions=[]},loadLyricists:function(t){var e=this,a={};""!==t?(this.loading=!0,Et(a).then(function(a){e.loading=!1,e.lyricistOptions=a.data.filter(function(e){return e.label.toLowerCase().indexOf(t.toLowerCase())>-1})})):this.lyricistOptions=[]},loadComposers:function(t){var e=this,a={};""!==t?(this.loading=!0,At(a).then(function(a){e.loading=!1,e.composerOptions=a.data.filter(function(e){return e.label.toLowerCase().indexOf(t.toLowerCase())>-1})})):this.composerOptions=[]},loadGenreOptions:function(){var t=this,e={};Wt(e).then(function(e){t.genreOptions=e.data.genreOptions})},loadTags:function(t){var e=this,a={};""!==t?(this.loading=!0,Bt(a).then(function(a){e.loading=!1,e.tagOptions=a.data.filter(function(e){return e.label.toLowerCase().indexOf(t.toLowerCase())>-1})})):this.tagOptions=[]},loadLibrary:function(t){var e=this;this.tableData=[],qt(t).then(function(t){var a=t.data.paging;e.totalCount=a.total,e.currentPage=a["page-index"],e.tableData=t.data.Songs})},onLyricRightChange:function(t){console.log(t)},onMusicRightChange:function(t){console.log(t)},onFilterSubmit:function(){console.log({op:"and",artist:this.filterForm.artists.join("^"),album:this.filterForm.albums.join("^"),lyricist:this.filterForm.lyricists.join("^"),composer:this.filterForm.composers.join("^"),ownership:this.filterForm.ownership.join("^"),lyricshare:this.filterForm.lyricRight.join(),melodyshare:this.filterForm.musicRight.join(),genre:this.filterForm.genre,tags:this.filterForm.tags.join(),pagesize:this.pageSize,pageindex:1}),this.loadLibrary({op:"and",artist:this.filterForm.artists.join("^"),album:this.filterForm.albums.join("^"),lyricist:this.filterForm.lyricists.join("^"),composer:this.filterForm.composers.join("^"),ownership:this.filterForm.ownership.join("^"),lyricshare:this.filterForm.lyricRight.join(),melodyshare:this.filterForm.musicRight.join(),genre:this.filterForm.genre,tags:this.filterForm.tags.join(),pagesize:this.pageSize,pageindex:1})},onFilterReset:function(t){this.$refs[t].resetFields(),this.filterForm={artists:[],albums:[],lyricists:[],composers:[],genre:"",tags:[],ownership:[],lyricRight:[0,100],musicRight:[0,100]}},onAddToPlaylistConfirmed:function(){var t=this,e=this.addToPlaylistForm.playlist,a=this.playlistOptions.findIndex(function(t){return t.ID==e}),s=[],i=!1;for(var o in this.playlistOptions[a].songs)s.push(this.playlistOptions[a].songs[o].ID),this.playlistOptions[a].songs[o].ID==this.addToPlaylistSong.ID&&(i=!0);i||s.push(this.addToPlaylistSong.ID);var l={song_ids:s};Gt(l,e).then(function(e){t.loadPlaylists(),t.$message({type:"success",message:"歌曲添加修改成功。"})}).catch(function(){t.$message({type:"error",message:"系统或网络异常，请联系管理员。"})}),this.a2pDialogVisible=!1},loadPlaylists:function(t){var e=this;Mt(t).then(function(t){e.playlistOptions=t.data,e.addToPlaylistForm.playlist=e.playlistOptions[0].ID})},openDetails:function(t,e,a){this.songdata=t,this.dialogvisible=!0},play:function(t){this.$store.dispatch("playSong",[t])},addToPlaylist:function(t){this.addToPlaylistSong=t,this.a2pDialogVisible=!0},download:function(t){window.open(t.audioFile,"Download")},handleSizeChange:function(t){console.log("每页 ".concat(t," 条")),this.pageSize=t,this.loadLibrary({pagesize:this.pageSize,pageindex:this.currentPage})},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.currentPage=t,this.loadLibrary({pagesize:this.pageSize,pageindex:this.currentPage})}},computed:{currentSearchText:function(){return this.$store.getters.currentSearchText}},watch:{currentSearchText:function(t,e){""!=t.value&&this.loadLibrary({keyvalue:t.value,pagesize:this.pageSize,pageindex:1})}},mounted:function(){this.loadGenreOptions(),this.loadPlaylists();var t=this.$route.params.searchText;t&&""!=t.value?this.loadLibrary({keyvalue:t.value,pagesize:this.pageSize,pageindex:1}):this.loadLibrary({pagesize:this.pageSize,pageindex:1})},components:{SongDetails:jt}},Zt=Ut,Kt=(a("97d3"),Object(m["a"])(Zt,Ct,Pt,!1,null,null,null));Kt.options.__file="Library.vue";var Qt=Kt.exports,Xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-table scrollable page-playlist"},[a("div",{staticClass:"card-base card-shadow--medium filter-box bg-white"},[a("el-collapse",{attrs:{value:"1"}},[a("el-collapse-item",{staticClass:"filter-collapse-item",attrs:{title:"Playlists",name:"1"}},[a("el-form",{ref:"playlistForm",attrs:{model:t.playlistForm}},[a("el-row",[a("el-form-item",{attrs:{label:"Playlist",prop:"playlist"}},[a("el-col",{staticClass:"playlist-select-col",attrs:{span:12}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{change:t.onPlaylistSelected},model:{value:t.playlistForm.playlist,callback:function(e){t.$set(t.playlistForm,"playlist",e)},expression:"playlistForm.playlist"}},t._l(t.playlistOptions,function(t){return a("el-option",{key:t.ID,attrs:{label:t.name,value:t.ID}})}))],1),a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{icon:"el-icon-caret-right"},on:{click:function(e){t.playPlaylist()}}},[t._v("播放")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.onAddPlaylist}},[t._v("新建")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.onEditPlaylist}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:t.onDeletePlaylist}},[t._v("删除")])],1)],1)],1)],1)],1)],1)],1),a("div",{staticClass:"table-box card-base card-shadow--medium"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData},on:{"row-click":t.openDetails}},[a("el-table-column",{attrs:{prop:"title",label:"Title"}}),a("el-table-column",{attrs:{prop:"ops",label:"",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"mini",icon:"el-icon-caret-right",circle:""},on:{click:function(a){a.stopPropagation(),t.play(e.row)}}}),a("el-button",{attrs:{type:"mini",icon:"el-icon-delete",circle:""},on:{click:function(a){a.stopPropagation(),t.deleteFromPlaylist(e.row)}}}),a("el-button",{attrs:{type:"mini",icon:"el-icon-download",circle:""},on:{click:function(a){a.stopPropagation(),t.download(e.row)}}})]}}])}),a("el-table-column",{attrs:{prop:"artist",label:"Artists"}}),a("el-table-column",{attrs:{prop:"composers",label:"Composers"}}),a("el-table-column",{attrs:{prop:"lyricists",label:"Lyricists"}}),a("el-table-column",{attrs:{prop:"album",label:"Album"}})],1)],1),a("song-details",{attrs:{dialogvisible:t.dialogvisible,songdata:t.songdata},on:{"update:dialogvisible":function(e){t.dialogvisible=e}}})],1)},Yt=[],te={name:"Playlist",data:function(){return{playlistForm:{playlist:{}},playlistOptions:[],selectedPlaylist:"",addplayListForm:{name:""},tableData:[],dialogvisible:!1,songdata:{copyrights:{lyric:"",music:""}}}},methods:{onPlaylistSelected:function(t){var e=this.playlistOptions.findIndex(function(e){return e.ID==t});this.selectedPlaylist=this.playlistOptions[e].ID,this.tableData=this.playlistOptions[e].songs},onAddPlaylist:function(){var t=this;this.$prompt("请输入名称","创建一个新的Playlist",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){var a=e.value;if(a){var s={name:a};Ht(s).then(function(e){t.loadPlaylists({},"new"),t.$message({type:"success",message:"Playlist “"+a+"” 创建成功。"})})}else t.$message({type:"error",message:"请输入名称。"})}).catch(function(){t.$message({type:"info",message:"取消创建。"})})},onEditPlaylist:function(){var t=this,e=this.selectedPlaylist,a=this.playlistOptions.findIndex(function(t){return t.ID==e});this.$prompt("请输入 Playlist “"+this.playlistOptions[a].name+"”的新名称","修改名称",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(a){var s=a.value,i={name:s};Gt(i,e).then(function(e){t.loadPlaylists(),t.$message({type:"success",message:"Playlist “"+s+"” 修改成功。"})}).catch(function(){t.$message({type:"error",message:"系统或网络异常，请联系管理员。"})})}).catch(function(){t.$message({type:"info",message:"取消修改。"})})},onDeletePlaylist:function(){var t=this,e=this.selectedPlaylist,a=this.playlistOptions.findIndex(function(t){return t.ID==e});this.$confirm("正在永久删除 Playlist “"+this.playlistOptions[a].name+"”","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){var a={};Vt(a,e).then(function(e){t.loadPlaylists(),t.$message({type:"success",message:"已成功删除。"})}).catch(function(){t.$message({type:"error",message:"系统或网络异常，请联系管理员。"})})}).catch(function(){t.$message({type:"info",message:"删除已取消。"})})},loadPlaylists:function(t,e){var a=this;Mt(t).then(function(t){console.log(t.data),a.playlistOptions=t.data,"new"==e?(a.playlistForm.playlist=a.playlistOptions[a.playlistOptions.length-1].ID,a.selectedPlaylist=a.playlistOptions[a.playlistOptions.length-1].ID,a.tableData=a.playlistOptions[a.playlistOptions.length-1].songs):(a.playlistForm.playlist=a.playlistOptions[0].ID,a.selectedPlaylist=a.playlistOptions[0].ID,a.tableData=a.playlistOptions[0].songs)})},openDetails:function(t,e,a){this.songdata=t,this.dialogvisible=!0},playPlaylist:function(){var t=this.selectedPlaylist,e=this.playlistOptions.findIndex(function(e){return e.ID==t});this.$store.dispatch("playSong",this.playlistOptions[e].songs)},play:function(t){this.$store.dispatch("playSong",[t])},deleteFromPlaylist:function(t){var e=this,a=this.selectedPlaylist,s=this.playlistOptions.findIndex(function(t){return t.ID==a});this.$confirm("正在从 Playlist “"+this.playlistOptions[s].name+"” 中移除歌曲《"+t.title+"》","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){var s={song_ids:[t.ID]};Gt(s,a).then(function(t){e.loadPlaylists(),e.$message({type:"success",message:"已成功移除。"})}).catch(function(){e.$message({type:"error",message:"系统或网络异常，请联系管理员。"})})}).catch(function(){e.$message({type:"info",message:"取消移除。"})})},download:function(t){window.open(t.audioFile,"Download")}},mounted:function(){this.loadPlaylists()},components:{SongDetails:jt}},ee=te,ae=(a("831c"),Object(m["a"])(ee,Xt,Yt,!1,null,null,null));ae.options.__file="Playlists.vue";var se=ae.exports,ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"scrollable"},[t._v("\n\tComing soon...\n")])},oe=[],le={name:"Contract",data:function(){return{}},methods:{},mounted:function(){},components:{}},ne=le,re=(a("8c2c"),Object(m["a"])(ne,ie,oe,!1,null,null,null));re.options.__file="Contract.vue";var ce=re.exports,ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"scrollable"},[t._v("\n\tComing soon...\n")])},pe=[],de={name:"Reporting",data:function(){return{}},methods:{},mounted:function(){},components:{}},me=de,fe=(a("1c9a"),Object(m["a"])(me,ue,pe,!1,null,null,null));fe.options.__file="Reporting.vue";var ge=fe.exports,he=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("vue-scroll",{staticClass:"login-page align-vertical"},[s("div",{staticClass:"form-wrapper align-vertical-middle"},[s("div",{staticClass:"form-box card-base card-shadow--extraLarge"},[s("img",{staticClass:"image-logo",attrs:{src:a("e347"),alt:"logo"}}),s("float-label",{staticClass:"styled"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.username,expression:"form.username"}],attrs:{type:"email",placeholder:"Username"},domProps:{value:t.form.username},on:{input:function(e){e.target.composing||t.$set(t.form,"username",e.target.value)}}})]),s("float-label",{staticClass:"styled"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],attrs:{type:"password",placeholder:"Password"},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}})]),s("div",{staticClass:"flex text-center center pt-30 pb-10"},[s("el-button",{staticClass:"login-btn tada animated",attrs:{plain:"",size:"small"},on:{click:t.login}},[t._v("\n\t\t\t\t\tLOGIN\n\t\t\t\t")])],1),s("div",{staticClass:"text-center signin-box pt-20"},[t._v("\n\t\t\t\t"+t._s(t.errorMsg)+"\n\t\t\t")])],1)])])},ve=[],be={name:"Login",data:function(){return{form:{username:"",password:""},errorMsg:""}},methods:{login:function(){var t=this,e=this,a={user:{email:this.form.username,password:this.form.password}};Jt(a).then(function(e){console.log(e.data.email),t.$store.commit("setLogin",e.data.email),t.$router.push("library")}).catch(function(t){"401"==t.response.status?e.errorMsg="账号或密码有误，请检查后再试，谢谢。":e.errorMsg="系统异常，请联系管理员。"})}}},ye=be,_e=(a("206d"),Object(m["a"])(ye,he,ve,!1,null,null,null));_e.options.__file="Login.vue";var we=_e.exports,xe=a("2f62"),Ce=a("0e44");s["default"].use(xe["a"]);var Pe=!1,Se=new xe["a"].Store({state:{searchText:"",autoplay:!1,currentPlaySong:{},currentPlaylist:[],layout:{navPos:"left",toolbar:"top",footer:!0,boxed:!1,roundedCorners:!1,viewAnimation:"fade-top"},splashScreen:!0,logged:!1,username:""},mutations:{setSearchText:function(t,e){t.searchText=e},playSong:function(t,e){t.currentPlaySong=e},setPlaylist:function(t,e){t.currentPlaylist=e},addToPlaylist:function(t,e){t.playlist.push(e)},setLayout:function(t,e){e&&void 0!==e.navPos&&(t.layout.navPos=e.navPos),e&&void 0!==e.toolbar&&(t.layout.toolbar=e.toolbar),e&&void 0!==e.footer&&(t.layout.footer=e.footer),e&&void 0!==e.boxed&&(t.layout.boxed=e.boxed),e&&void 0!==e.roundedCorners&&(t.layout.roundedCorners=e.roundedCorners),e&&void 0!==e.viewAnimation&&(t.layout.viewAnimation=e.viewAnimation)},setLogin:function(t,e){t.logged=!0,t.useranme=e},setLogout:function(t,e){t.layout.navPos=null,t.layout.toolbar=null,t.logged=!1},setSplashScreen:function(t,e){t.splashScreen=e}},actions:{setLayout:function(t,e){t.commit("setLayout",e)},search:function(t,e){t.commit("setSearchText",e)},playSong:function(t,e){t.commit("playSong",e)},playPlaylist:function(t,e){t.commit("setPlaylist",e)},addToPlaylist:function(t,e){t.commit("addToPlaylist",e)}},getters:{currentUsername:function(t,e){return t.useranme},currentSearchText:function(t,e){return t.searchText},autoplay:function(t,e){return t.autoplay},currentPlaylist:function(t,e){return t.currentPlaylist},currentPlaySong:function(t,e){return t.currentPlaySong},layout:function(t,e){return t.layout},navPos:function(t,e){return t.layout.navPos},toolbar:function(t,e){return t.layout.toolbar},footer:function(t,e){return t.layout.footer},boxed:function(t,e){return t.layout.boxed},roundedCorners:function(t,e){return t.layout.roundedCorners},viewAnimation:function(t,e){return t.layout.viewAnimation},isLogged:function(t,e){return t.logged},splashScreen:function(t,e){return t.splashScreen}},plugins:[Object(Ce["a"])()],strict:Pe});s["default"].use(xt["a"]);var Oe=new xt["a"]({mode:"history",routes:[{path:"/",alias:"/library",name:"library",component:Qt,meta:{auth:!0,layout:{navPos:"left"}}},{path:"/playlists",name:"playlists",component:se,meta:{auth:!0,layout:{navPos:"left"}}},{path:"/contract",name:"contract",component:ce,meta:{auth:!0,layout:{navPos:"left"}}},{path:"/reporting",name:"reporting",component:ge,meta:{auth:!0,layout:{navPos:"left"}}},{path:"/login",name:"login",component:we,meta:{layout:{navPos:!1}}},{path:"/logout",beforeEnter:function(t,e,a){$e.logout(),a({path:"/login"})}}]}),ke={contenOnly:function(){Se.commit("setLayout",layouts.contenOnly)},navLeft:function(){Se.commit("setLayout",layouts.navLeft)},navRight:function(){Se.commit("setLayout",layouts.navRight)},navTop:function(){Se.commit("setLayout",layouts.navTop)},navBottom:function(){Se.commit("setLayout",layouts.navBottom)},set:function(t){Se.commit("setLayout",t)}},$e={loggedIn:function(){return Se.getters.isLogged},logout:function(){Se.commit("setLogout")}};Oe.beforeEach(function(t,e,a){var s=!1;if(t&&t.meta&&t.meta.auth&&(s=!0),s)if($e.loggedIn()){if("login"===t.name)return window.location.href="/",!1;a()}else{if("login"!==t.name)return window.location.href="/login",!1;a()}else{if($e.loggedIn()&&"login"===t.name)return window.location.href="/",!1;a()}t&&t.meta&&t.meta.layout&&ke.set(t.meta.layout)}),Oe.afterEach(function(t,e){setTimeout(function(){Se.commit("setSplashScreen",!1)},500)});var Fe=Oe,Le=a("cf0d"),je=a.n(Le);a("94db");s["default"].config.productionTip=!1,s["default"].config.devtools=!0,s["default"].component("Peity",ct.a),s["default"].component("vue-scroll",vt),s["default"].use(yt.a),s["default"].use(nt["a"]),s["default"].use(it.a,{locale:lt.a}),s["default"].use(wt.a),s["default"].use(je.a),new s["default"]({router:Fe,store:Se,render:function(t){return t(at)}}).$mount("#app")},"5a65":function(t,e,a){},"5c0b":function(t,e,a){"use strict";var s=a("2856"),i=a.n(s);i.a},"60d0":function(t,e,a){},"65ba":function(t,e,a){"use strict";var s=a("5a65"),i=a.n(s);i.a},"6fa1":function(t,e,a){"use strict";var s=a("089b"),i=a.n(s);i.a},"78e1":function(t,e,a){"use strict";var s=a("232f"),i=a.n(s);i.a},"831c":function(t,e,a){"use strict";var s=a("60d0"),i=a.n(s);i.a},"8c2c":function(t,e,a){"use strict";var s=a("0519"),i=a.n(s);i.a},"97d3":function(t,e,a){"use strict";var s=a("ecbf"),i=a.n(s);i.a},a140:function(t,e,a){"use strict";var s=a("15f9"),i=a.n(s);i.a},b751:function(t,e,a){},beb6:function(t,e,a){"use strict";var s=a("461a"),i=a.n(s);i.a},c9e4:function(t,e,a){"use strict";var s=a("328d"),i=a.n(s);i.a},d6f3:function(t,e,a){"use strict";var s=a("3c83"),i=a.n(s);i.a},e347:function(t,e,a){t.exports=a.p+"img/logo.ede95eb3.svg"},ecbf:function(t,e,a){},f0a1:function(t,e,a){"use strict";var s=a("4e44"),i=a.n(s);i.a},f6d1:function(t,e,a){},f892:function(t,e,a){"use strict";var s=a("f6d1"),i=a.n(s);i.a},f8b3:function(t,e,a){}});
//# sourceMappingURL=app.d6f9da38.js.map